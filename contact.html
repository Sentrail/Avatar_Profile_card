<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Contact Us - Yusuf Israel Timileyin</title>
  <style>
    /* Shared Reset & Base (consistent with Profile Card) */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      line-height: 1.5; color: #333; background: #f5f5f5; padding: 2rem;
      display: flex; justify-content: center; align-items: center; min-height: 100vh;
    }
    a:focus, button:focus, input:focus, textarea:focus, select:focus {
      outline: 2px solid #007bff; outline-offset: 2px;
    }
    /* Page Styles */
    .contact-page { background: white; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 500px; width: 100%; padding: 2rem; }
    @media (max-width: 767px) { .contact-page { padding: 1.5rem; } }
    h1 { font-size: 1.75rem; margin-bottom: 1.5rem; color: #212529; text-align: center; }
    form { display: flex; flex-direction: column; gap: 1rem; }
    label { font-weight: 500; color: #495057; margin-bottom: 0.25rem; }
    input, select, textarea {
      padding: 0.75rem; border: 1px solid #ced4da; border-radius: 6px; font-size: 1rem;
      transition: border-color 0.2s ease; width: 100%;
    }
    input:focus, select:focus, textarea:focus { border-color: #007bff; }
    textarea { min-height: 100px; resize: vertical; }
    .error-msg { display: none; color: #dc3545; font-size: 0.875rem; margin-top: 0.25rem; }
    .error-msg.show { display: block; }
    .success-msg { display: none; background: #d4edda; color: #155724; padding: 1rem; border-radius: 6px; margin-top: 1rem; text-align: center; }
    .success-msg.show { display: block; }
    button[type="submit"] {
      background: #007bff; color: white; border: none; padding: 0.75rem; border-radius: 6px;
      font-size: 1rem; font-weight: 500; cursor: pointer; transition: background 0.2s ease;
    }
    button[type="submit"]:hover:not(:disabled), button[type="submit"]:focus:not(:disabled) { background: #0056b3; }
    button[type="submit"]:disabled { background: #6c757d; cursor: not-allowed; }
  </style>
</head>
<body>
  <main class="contact-page" data-testid="test-contact-page">
    <h1>Contact Me</h1>
    <form id="contact-form" novalidate>
      <div>
        <label for="name">Full Name</label>
        <input type="text" id="name" data-testid="test-contact-name" required aria-describedby="name-error">
        <div id="name-error" class="error-msg" data-testid="test-contact-error-name" role="alert"></div>
      </div>
      <div>
        <label for="email">Email</label>
        <input type="email" id="email" data-testid="test-contact-email" required aria-describedby="email-error">
        <div id="email-error" class="error-msg" data-testid="test-contact-error-email" role="alert"></div>
      </div>
      <div>
        <label for="subject">Subject</label>
        <select id="subject" data-testid="test-contact-subject" required aria-describedby="subject-error">
          <option value="">Select a subject</option>
          <option value="general">General Inquiry</option>
          <option value="collab">Collaboration</option>
          <option value="feedback">Feedback</option>
        </select>
        <div id="subject-error" class="error-msg" data-testid="test-contact-error-subject" role="alert"></div>
      </div>
      <div>
        <label for="message">Message</label>
        <textarea id="message" data-testid="test-contact-message" required aria-describedby="message-error"></textarea>
        <div id="message-error" class="error-msg" data-testid="test-contact-error-message" role="alert"></div>
      </div>
      <button type="submit" data-testid="test-contact-submit">Send Message</button>
      <div id="success-msg" class="success-msg" data-testid="test-contact-success" role="alert" aria-live="polite">
        Thanks for reaching out! I'll get back to you soon.
      </div>
    </form>
  </main>

  <script>
    // Form Validation & Submission (modular, accessible)
    document.addEventListener('DOMContentLoaded', () => {
      const form = document.getElementById('contact-form');
      const successMsg = document.getElementById('success-msg');

      // Validation helpers
      const validateField = (field, errorEl, rules) => {
        let isValid = true;
        rules.forEach(rule => {
          if (!rule.test(field.value)) {
            errorEl.textContent = rule.message;
            errorEl.classList.add('show');
            isValid = false;
          } else {
            errorEl.textContent = '';
            errorEl.classList.remove('show');
          }
        });
        field.setAttribute('aria-invalid', !isValid);
        return isValid;
      };

      const getErrorEl = (fieldId) => document.getElementById(`${fieldId}-error`);
      const getField = (testId) => document.querySelector(`[data-testid="${testId}"]`);

      // Real-time validation on input
      ['name', 'email', 'subject', 'message'].forEach(fieldId => {
        const field = document.getElementById(fieldId);
        field.addEventListener('input', () => validateField(field, getErrorEl(fieldId), getRules(fieldId)));
      });

      // Submit handler
      form.addEventListener('submit', (e) => {
        e.preventDefault();
        let isFormValid = true;

        // Validate all fields
        const fields = {
          name: { el: getField('test-contact-name'), rules: [/.+/] }, // Required
          email: { el: getField('test-contact-email'), rules: [/.+@.+\..+/, { test: v => v.includes('@') && v.includes('.'), message: 'Please enter a valid email (e.g., name@example.com)' }] },
          subject: { el: getField('test-contact-subject'), rules: [/.+/] },
          message: { el: getField('test-contact-message'), rules: [/.{10,}/, { test: v => v.length >= 10, message: 'Message must be at least 10 characters' }] }
        };

        Object.entries(fields).forEach(([key, { el, rules }]) => {
          const valid = validateField(el, getErrorEl(key), rules.map(r => typeof r === 'object' ? r : { test: r, message: `${key.charAt(0).toUpperCase() + key.slice(1)} is required` }));
          if (!valid) isFormValid = false;
        });

        if (isFormValid) {
          // Simulate success (hide errors, show message)
          document.querySelectorAll('.error-msg').forEach(el => el.classList.remove('show'));
          successMsg.classList.add('show');
          form.reset();
          // Optional: Reset aria-invalid
          form.querySelectorAll('input, select, textarea').forEach(el => el.setAttribute('aria-invalid', 'false'));
        }
      });

      // Helper: Get rules (array of regex or {test, message})
      function getRules(fieldId) {
        // Simplifiedâ€”expand as needed
        if (fieldId === 'email') return [/.+@.+\..+/];
        if (fieldId === 'message') return [/.{10,}/];
        return [/.+/];
      }

      // Quick Test: Paste in console to verify elements
        console.log('Contact Tests:', { name: !!getField('test-contact-name'), submit: !!getField('test-contact-submit') });
    });
  </script>
</body>
</html>